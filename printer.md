# 打印小票

## 1.打印机配置

客户端支持打印支付、退款、班结小票功能。

可从打印机底部标签或接口查看打印机类型，根据不同类型，在客户端”打印小票“设置中进行对应的操作。

客户端支持四种打印机：串口打印机、驱动打印机、并口打印机和网络打印机。

![](/image/image20.png)

例如，收银机连接的串口打印机，使用串口COM2，那需要在“打印机类型”中选择“串口打印机”，并设置“打印机端口”为COM2，保存后客户端就可以打印小票。

![](/image/image21.png)

同样的，如果是并口打印机，从收银软件中查看打印机LPT接口，然后再客户端设置中选择对应的LPT接口；

​               如果是驱动打印机，在打印机底部标签页查看打印机型号，然后在客户端打印机设置中选择对应的驱动打印机型号； 

​               如果是网络打印机，先关闭打印机，然后按住出纸键不松手，打开打印机，5秒钟之后松开出纸键，此时打印机自动出一张自检页，可从自检页上查看IP地址，在客户端打印机设置里填入对应的IP地址，端口默认填写9100。

## 2.打印小票

有“打印收款小票”和“打印退款小票”两个设置项，开启后打印，关闭后不打印，并可以自行设置打印数量。



## 3.打印机端口映射

**当遇到端口冲突打印不出小票并且收银软件打印设置只能选择并口的时候，需要选择端口映射（并口转发），其他情况无需设置，（映射端口com1到com4，如超出端口，需要修改物理端口）**

#### 3.1 安装虚拟串口工具

打开安装包→工具包→辅助工具-虚拟串口驱动，双击“辅助工具-虚拟串口驱动.exe“

![](/image/image9.png)

一直点击“Next”，直到出现”install“，然后点击”install“进行安装，安装之后点击”finish“即可

![](/assets/gfhort.png)



![](/assets/imp463fort.png)

![](/assets/im134114port.png)



#### 3.2生成虚拟串口

在桌面找到虚拟串口工具的图标双击打开。

![](/image/image10.png)

点击”Add pair“就能新增一对虚拟串口。

#### 3.3 打开收银软件

① 使用管理员账号登录，进入客显设置（例：思迅收银软件）收银软件只能选择【lpt1】

![](/picture/dkys 012.png)

![](/picture/dkys 013.png)

![](/picture/dkys 014.png)

② 将电脑原本的【lpt1】改为【lpt2】(右键我的电脑→管理→设备管理→端口→通讯端口，右键属性→端口设置→点击端口号选择)

![](/picture/dkys 015.jpg)

![](/picture/dkys 016.jpg)

③ 修改端口映射的文件

右键映射文件→编辑→修改为【lpt1=com1】（虚拟的其中一个端口）保存→复制【mode lpt1=com1】

![](/picture/dkys 017.png)

![](/picture/dkys 018.jpg)



**打开运行输入【cmd】→粘贴【mode lpt1=com1】，按回车**

![](/picture/dkys 019.png)

看得到的数据如；
       设备状态；  lpt1
        -------------------------------
正将打印机输出结果重选路由到串口【com1】
则表明映射端口成功

点击数据对接---选择"虚拟串口打印机"→输入串口选择虚拟的【com2】（另一个端口），点击保存。

![](/picture/dkys 020.png)

点击”打印小票“→打印机类型选择“并口打印机”→打印机端口选择【lpt2】（修改后的电脑端口）---保存

![](/image/image20.png)



收银软件只能选择lpt口    （收银软件lpt1修改为lpt2）

![](/picture/dkys 014.png)

右键映射文件→编辑→修改为【lpt2=com1】（虚拟的其中一个端口）保存→复制【mode lpt2=com1】



![](/picture/dkys 26.png)



**打开运行输入【cmd】→粘贴【mode lpt2=com1】，按回车**

看得到的数据如；
       设备状态；  lpt2
        -------------------------------
正将打印机输出结果重选路由到串口com1
则表明映射端口成功



点击数据对接---选择"虚拟串口打印机"→输入串口选择虚拟的【com2】（另一个端口），点击保存。

![](/picture/dkys 020.png)

点击”打印小票“→打印机类型选择“并口打印机”→打印机端口选择【lpt1】（修改后的电脑端口）---保存

![](/image/image20.png)



④ 设置开机自启

打印设置完成后，创建映射文件快捷方式到开机启动项里

![](/picture/dkys 024.png)

![](/picture/dkys 025.png)

⑤ 重启电脑，进行打印机测试。